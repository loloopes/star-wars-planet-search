(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(6),l=n.n(u),c=(n(13),n(1)),i=Object(a.createContext)();var o=function(e){var t=e.children,n=Object(a.useState)([]),u=Object(c.a)(n,2),l=u[0],o=u[1],s=Object(a.useState)({filterByName:{name:""},filterByNumericValues:[]}),m=Object(c.a)(s,2),f=m[0],b=m[1],p=Object(a.useState)([]),d=Object(c.a)(p,2),O=d[0],j=d[1],v=Object(a.useState)(f.options1),E=Object(c.a)(v,2),h=E[0],y=E[1];Object(a.useEffect)((function(){fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()})).then((function(e){e.results.forEach((function(e){return delete e.residents})),o(e.results)}))}),[]);var g={planets:l,filters:f,setFilters:b,filteredPlanets:O,setFilteredPlanets:j,options1:h,setOptions1:y};return r.a.createElement(i.Provider,{value:g},t)};var s=function(){var e=Object(a.useContext)(i),t=e.planets,n=e.filteredPlanets,u=t.length>0&&Object.keys(t[0]).map((function(e,t){return r.a.createElement("th",{key:t},e)}));return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,u)),r.a.createElement("tbody",null,n.map((function(e,t){return r.a.createElement("tr",{key:t},Object.values(e).map((function(e){return r.a.createElement("td",{key:e},e)})))}))))},m=n(2),f=function(){var e=Object(a.useContext)(i),t=e.filters,n=e.setFilters;return r.a.createElement("input",{type:"text",onChange:function(e){var a=e.target.value;n(Object(m.a)(Object(m.a)({},t),{},{filterByName:{name:a}}))},"data-testid":"name-filter"})},b=n(7);var p=function(){var e=Object(a.useContext)(i),t=e.filters,n=e.setFilters,u=e.setFilteredPlanets,l=e.planets,o=e.filteredPlanets,s=t.filterByNumericValues,f=["population","orbital_period","diameter","rotation_period","surface_water"],p=Object(a.useState)("population"),d=Object(c.a)(p,2),O=d[0],j=d[1],v=Object(a.useState)("maior que"),E=Object(c.a)(v,2),h=E[0],y=E[1],g=Object(a.useState)(0),N=Object(c.a)(g,2),k=N[0],x=N[1],C=function(){return s.forEach((function(e){var t=e.column;f.splice(f.indexOf(t),1)})),f};return Object(a.useEffect)((function(){console.log("test"),u(s.length?s.reduce((function(e,t){var n=t.column,a=t.comparison,r=t.value;return e.filter((function(e){switch(a){case"maior que":return Number(e[n])>Number(r);case"menor que":return Number(e[n])<Number(r);case"igual a":return Number(e[n])===Number(r);default:return!1}}))}),l):o)}),[s]),r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{name:"column",onChange:function(e){var t=e.target;return j(t.value)},"data-testid":"column-filter"},C().map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("select",{name:"comparison",onChange:function(e){var t=e.target;return y(t.value)},"data-testid":"comparison-filter"},["maior que","menor que","igual a"].map((function(e){return r.a.createElement("option",{key:e},e)}))),r.a.createElement("input",{onChange:function(e){var t=e.target;return x(t.value)},type:"number","data-testid":"value-filter",name:"value"}),r.a.createElement("button",{onClick:function(){n(Object(m.a)(Object(m.a)({},t),{},{filterByNumericValues:[].concat(Object(b.a)(s),[{column:O,comparison:h,value:k}])})),C()},type:"button","data-testid":"button-filter"},"OnOffFilter"))};var d=function(){var e=Object(a.useContext)(i),t=e.planets,n=e.filters,u=e.setFilteredPlanets;return Object(a.useEffect)((function(){u(t.filter((function(e){return e.name.includes(n.filterByName.name)})))}),[n.filterByName.name,t,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null),r.a.createElement(p,null),r.a.createElement(s,null))};var O=function(){return r.a.createElement(o,null,r.a.createElement(d,null))};l.a.render(r.a.createElement(O,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.25f4a466.chunk.js.map